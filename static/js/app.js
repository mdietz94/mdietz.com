// Generated by CoffeeScript 1.6.3
/*
    mdietz.me
    Copyright (C) 2013  Max Dietz

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program.  If not, see <http://www.gnu.org/licenses/>.
*/


(function() {
  var currentPage, locked, moveLeft, moveRight, onPageMoveEnd, updatePages;

  currentPage = 0;

  locked = false;

  updatePages = function() {
    switch (currentPage) {
      case -1:
        $("#content-left").show();
        break;
      case 0:
        $("#content-main").show();
        break;
      default:
        $("#content-right").show();
    }
    $('body').animate({
      scrollTop: 0
    }, 300);
    $("#content-main").css('left', "" + (currentPage * -110) + "%");
    $("#content-left").css('left', "" + ((1 + currentPage) * -110) + "%");
    $("#content-right").css('left', "" + ((-1 + currentPage) * -110) + "%");
    if (currentPage === -1) {
      return $("#page-left").addClass("disabled");
    } else if (currentPage === 1) {
      return $("#page-right").addClass("disabled");
    } else {
      $("#page-right").removeClass("disabled");
      return $("#page-left").removeClass("disabled");
    }
  };

  onPageMoveEnd = function() {
    locked = false;
    switch (currentPage) {
      case -1:
        $("#page").html("Resume");
        $("#content-main").hide();
        return $("#content-right").hide();
      case 0:
        $("#page").html("Projects");
        $("#content-left").hide();
        return $("#content-right").hide();
      default:
        $("#page").html("Contact Information");
        $("#content-main").hide();
        return $("#content-left").hide();
    }
  };

  moveLeft = function() {
    $("#usage").fadeOut(1000);
    if (!locked && currentPage > -1) {
      locked = true;
      currentPage -= 1;
      return updatePages();
    }
  };

  moveRight = function() {
    $("#usage").fadeOut(1000);
    if (!locked && currentPage < 1) {
      locked = true;
      currentPage += 1;
      return updatePages();
    }
  };

  $(function() {
    updatePages();
    onPageMoveEnd();
    $("#content-right").on('webkitTransitionEnd transitionend oTransitionEnd', onPageMoveEnd);
    $("#content-left").on('webkitTransitionEnd transitionend oTransitionEnd', onPageMoveEnd);
    $("#content-main").on('webkitTransitionEnd transitionend oTransitionEnd', onPageMoveEnd);
    $('body').keydown(function(e) {
      switch (e.which) {
        case 37:
          return moveLeft();
        case 39:
          return moveRight();
      }
    });
    $("#page-right").mousedown(moveRight);
    return $("#page-left").mousedown(moveLeft);
  });

  $(document).on('pageinit', function() {
    $(window).on("swipeleft", moveRight);
    $(window).on("swiperight", moveLeft);
    $(window).on("orientationchange", function(e) {
      if (e.orientation === "portrait") {
        return alert("This webpage is optimized for landscape view.");
      }
    });
    return $(window).orientationchange();
  });

}).call(this);
